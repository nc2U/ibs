# Generated by Django 6.0 on 2025-12-29 12:02

import django.db.models.deletion
import work.models.inform
import work.models.issue
import work.models.logging
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('company', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Branch',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
            ],
            options={
                'verbose_name': '17. 브랜치',
                'verbose_name_plural': '17. 브랜치',
                'ordering': ('-repo', 'name'),
            },
        ),
        migrations.CreateModel(
            name='Permission',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('sort', models.CharField(choices=[('project', '프로젝트'), ('issue', '업무관리'), ('time', '시간추적'), ('news', '공지'), ('docs', '문서'), ('file', '파일'), ('wiki', '위키'), ('repo', '저장소'), ('forum', '게시판'), ('calendar', '달력'), ('gantt', '간트차트')], db_index=True, max_length=10, verbose_name='모듈')),
                ('code', models.CharField(max_length=30, unique=True, verbose_name='코드')),
                ('name', models.CharField(max_length=20, verbose_name='이름')),
                ('is_default', models.BooleanField(default=False, verbose_name='기본 활성여부')),
                ('description', models.CharField(blank=True, default='', max_length=255, verbose_name='설명')),
            ],
            options={
                'verbose_name': '03. 권한',
                'verbose_name_plural': '03. 권한',
                'ordering': ('id',),
            },
        ),
        migrations.CreateModel(
            name='CodeActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=50, verbose_name='이름')),
                ('active', models.BooleanField(default=True, verbose_name='사용중')),
                ('default', models.BooleanField(default=False, verbose_name='기본값')),
                ('order', models.PositiveSmallIntegerField(default=1, verbose_name='정렬')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='수정일')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
            ],
            options={
                'verbose_name': '12. 작업 분류(시간추적)',
                'verbose_name_plural': '12. 작업 분류(시간추적)',
                'ordering': ('order', 'id'),
            },
        ),
        migrations.CreateModel(
            name='CodeDocsCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=20, verbose_name='이름')),
                ('active', models.BooleanField(default=True, verbose_name='사용중')),
                ('default', models.BooleanField(default=False, verbose_name='기본값')),
                ('order', models.PositiveSmallIntegerField(default=1, verbose_name='정렬')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일시')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='편집일시')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='등록자')),
            ],
            options={
                'verbose_name': '14. 문서 범주',
                'verbose_name_plural': '14. 문서 범주',
                'ordering': ('order', 'id'),
            },
        ),
        migrations.CreateModel(
            name='CodeIssuePriority',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=20, verbose_name='이름')),
                ('active', models.BooleanField(default=True, verbose_name='사용중')),
                ('default', models.BooleanField(default=False, verbose_name='기본값')),
                ('order', models.PositiveSmallIntegerField(default=1, verbose_name='정렬')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='수정일')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
            ],
            options={
                'verbose_name': '13. 업무 우선 순위',
                'verbose_name_plural': '13. 업무 우선 순위',
                'ordering': ('order', 'id'),
            },
        ),
        migrations.CreateModel(
            name='IssueCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=100, verbose_name='범주')),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='담당자')),
            ],
            options={
                'verbose_name': '09. 업무 범주',
                'verbose_name_plural': '09. 업무 범주',
                'ordering': ('-project', 'id'),
            },
        ),
        migrations.CreateModel(
            name='Issue',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('subject', models.CharField(db_index=True, max_length=100, verbose_name='제목')),
                ('description', models.TextField(blank=True, default='', verbose_name='설명')),
                ('is_private', models.BooleanField(default=False, verbose_name='비공개')),
                ('estimated_hours', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='추정 소요시간')),
                ('start_date', models.DateField(verbose_name='시작 일자')),
                ('due_date', models.DateField(blank=True, null=True, verbose_name='완료 기한')),
                ('done_ratio', models.PositiveSmallIntegerField(default=0, verbose_name='진척도')),
                ('closed', models.DateTimeField(blank=True, help_text='상태가 완료로 입력된 시간. 한 번 완료하면 다시 진행으로 변경해도 남아있음.', null=True, verbose_name='완료')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='수정일')),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assignees', to=settings.AUTH_USER_MODEL, verbose_name='담당자')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='creator', to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.issue', verbose_name='상위 업무')),
                ('priority', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='work.codeissuepriority', verbose_name='우선순위')),
                ('updater', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='updater', to=settings.AUTH_USER_MODEL, verbose_name='수정자')),
                ('watchers', models.ManyToManyField(blank=True, related_name='watchers', to=settings.AUTH_USER_MODEL, verbose_name='업무 관람자')),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.issuecategory', verbose_name='범주')),
            ],
            options={
                'verbose_name': '06. 업무(작업)',
                'verbose_name_plural': '06. 업무(작업)',
                'ordering': ('-id',),
            },
        ),
        migrations.CreateModel(
            name='IssueComment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('content', models.TextField(verbose_name='내용')),
                ('is_private', models.BooleanField(default=False, verbose_name='비공개 댓글')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='수정일')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('issue', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='work.issue', verbose_name='업무')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='replies', to='work.issuecomment')),
            ],
        ),
        migrations.CreateModel(
            name='IssueFile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(upload_to=work.models.issue.get_issue_file_path, verbose_name='파일')),
                ('file_name', models.CharField(blank=True, db_index=True, max_length=100, verbose_name='파일명')),
                ('file_type', models.CharField(blank=True, max_length=100, verbose_name='타입')),
                ('file_size', models.PositiveBigIntegerField(blank=True, null=True, verbose_name='사이즈')),
                ('description', models.CharField(blank=True, default='', max_length=255, verbose_name='부가설명')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('issue', models.ForeignKey(default=None, on_delete=django.db.models.deletion.CASCADE, related_name='files', to='work.issue', verbose_name='업무')),
            ],
        ),
        migrations.CreateModel(
            name='IssueLogEntry',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('log_id', work.models.logging.SequentialIntegerField()),
                ('action', models.CharField(choices=[('Created', '등록'), ('Updated', '수정'), ('Comment', '댓글')], default='Created', max_length=7, verbose_name='이벤트')),
                ('details', models.TextField(blank=True, default='', verbose_name='설명')),
                ('diff', models.TextField(blank=True, default='', verbose_name='차이점')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='로그 시간')),
                ('comment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.issuecomment', verbose_name='댓글')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('issue', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='work.issue', verbose_name='업무')),
            ],
            options={
                'verbose_name': '20. 업무 로그',
                'verbose_name_plural': '20. 업무 로그',
            },
        ),
        migrations.CreateModel(
            name='IssueProject',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('sort', models.CharField(choices=[('1', '본사관리'), ('2', '부동산개발'), ('3', '기타 프로젝트')], default='2', max_length=1, verbose_name='유형')),
                ('name', models.CharField(db_index=True, max_length=100, verbose_name='이름')),
                ('slug', models.CharField(help_text='1에서 100글자 소문자(a-z), 숫자, 대쉬(-)와 밑줄(_)만 가능합니다. 식별자는 저장 후에는 수정할 수 없습니다.', max_length=100, unique=True, verbose_name='식별자')),
                ('description', models.TextField(blank=True, default='', verbose_name='설명')),
                ('homepage', models.URLField(blank=True, max_length=255, null=True, verbose_name='홈페이지')),
                ('is_public', models.BooleanField(default=True, help_text='공개 프로젝트는 모든 로그인한 사용자가 접속할 수 있습니다.', verbose_name='공개')),
                ('is_inherit_members', models.BooleanField(default=False, verbose_name='상위 프로젝트 멤버 상속')),
                ('status', models.CharField(choices=[('1', '사용'), ('9', '잠금보관(모든 접근이 차단됨)')], default='1', max_length=1, verbose_name='사용여부')),
                ('order', models.PositiveSmallIntegerField(default=0, verbose_name='정렬순서')),
                ('slack_notifications_enabled', models.BooleanField(default=False, help_text='이 프로젝트의 Slack 알림 사용 여부. 웹훅 URL은 환경변수로 관리: 본사관리(sort=1)는 "com_slack_key", 개별 프로젝트는 "{slug}_slack_key"', verbose_name='Slack 알림 활성화')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='수정일')),
                ('activities', models.ManyToManyField(blank=True, to='work.codeactivity', verbose_name='작업분류(시간추적)')),
                ('company', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='company.company', verbose_name='회사')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.issueproject', verbose_name='상위 프로젝트')),
            ],
            options={
                'verbose_name': '01. 프로젝트(업무)',
                'verbose_name_plural': '01. 프로젝트(업무)',
                'ordering': ('order', 'id'),
            },
        ),
        migrations.AddField(
            model_name='issuecategory',
            name='project',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='categories', to='work.issueproject', verbose_name='프로젝트'),
        ),
        migrations.AddField(
            model_name='issue',
            name='project',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='work.issueproject', verbose_name='프로젝트'),
        ),
        migrations.CreateModel(
            name='IssueRelation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('relation_type', models.CharField(choices=[('relates', '다음 업무와 관련됨'), ('duplicates', '다음 업무에 중복됨'), ('duplicated', '중복된 업무'), ('blocks', '다음 업무의 해결을 막고 있음'), ('blocked', '다음 업무에게 막혀 있음'), ('precedes', '다음에 진행할 업무'), ('follows', '다음 업무를 우선 진행'), ('copied_to', '다음 업무로 복사됨'), ('copied_from', '다음 업무로부터 복사됨')], default='relates', max_length=20, verbose_name='관계 유형')),
                ('delay', models.PositiveSmallIntegerField(blank=True, null=True, verbose_name='지연일수')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('issue', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='relation_issues', to='work.issue', verbose_name='업무')),
                ('issue_to', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='relation_issue_to', to='work.issue', verbose_name='연결된 업무')),
            ],
        ),
        migrations.CreateModel(
            name='IssueStatus',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=20, verbose_name='이름')),
                ('description', models.CharField(blank=True, default='', max_length=255, verbose_name='설명')),
                ('closed', models.BooleanField(default=False, verbose_name='완료 상태')),
                ('order', models.PositiveSmallIntegerField(default=1, verbose_name='정렬')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='수정일')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
            ],
            options={
                'verbose_name': '10. 업무 상태',
                'verbose_name_plural': '10. 업무 상태',
                'ordering': ('order', 'id'),
            },
        ),
        migrations.AddField(
            model_name='issue',
            name='status',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='work.issuestatus', verbose_name='상태'),
        ),
        migrations.CreateModel(
            name='Module',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('issue', models.BooleanField(default=True, verbose_name='업무관리')),
                ('time', models.BooleanField(default=True, verbose_name='시간추적')),
                ('news', models.BooleanField(default=True, verbose_name='공지')),
                ('document', models.BooleanField(default=True, verbose_name='문서')),
                ('file', models.BooleanField(default=True, verbose_name='파일')),
                ('wiki', models.BooleanField(default=True, verbose_name='위키')),
                ('repository', models.BooleanField(default=False, verbose_name='저장소')),
                ('forum', models.BooleanField(default=True, verbose_name='게시판')),
                ('calendar', models.BooleanField(default=True, verbose_name='달력')),
                ('gantt', models.BooleanField(default=True, verbose_name='Gantt 차트')),
                ('project', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to='work.issueproject', verbose_name='프로젝트')),
            ],
        ),
        migrations.CreateModel(
            name='News',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(db_index=True, max_length=255, verbose_name='제목')),
                ('summary', models.CharField(blank=True, default='', max_length=255, verbose_name='요약')),
                ('content', models.TextField(blank=True, default='', verbose_name='내용')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일시')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='편집일시')),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='저자')),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='work.issueproject', verbose_name='프로젝트')),
            ],
            options={
                'verbose_name': '15. 공지',
                'verbose_name_plural': '15. 공지',
                'ordering': ('-created',),
            },
        ),
        migrations.CreateModel(
            name='NewsComment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('content', models.TextField(verbose_name='내용')),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('updated', models.DateTimeField(auto_now=True)),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='등록자')),
                ('news', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='work.news', verbose_name='공지')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='replies', to='work.newscomment')),
            ],
            options={
                'ordering': ['-created'],
            },
        ),
        migrations.CreateModel(
            name='NewsFile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(upload_to=work.models.inform.get_news_file_path, verbose_name='파일')),
                ('file_name', models.CharField(blank=True, db_index=True, max_length=255, verbose_name='파일명')),
                ('file_type', models.CharField(blank=True, max_length=80, verbose_name='타입')),
                ('file_size', models.PositiveBigIntegerField(blank=True, null=True, verbose_name='사이즈')),
                ('description', models.CharField(blank=True, default='', max_length=255, verbose_name='부가설명')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='등록자')),
                ('news', models.ForeignKey(default=None, on_delete=django.db.models.deletion.CASCADE, related_name='files', to='work.news', verbose_name='공지')),
            ],
        ),
        migrations.CreateModel(
            name='Repository',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_default', models.BooleanField(default=False, verbose_name='주저장소')),
                ('slug', models.CharField(help_text='1 에서 255 글자 소문자(a-z),숫자,대쉬(-)와 밑줄(_)만 가능합니다. 식별자는 저장 후에는 수정할 수 없습니다.', max_length=255, unique=True, verbose_name='식별자')),
                ('local_path', models.CharField(help_text='로컬의 bare 저장소 (예: /app/repos/repo.git)', max_length=255, verbose_name='저장소 경로')),
                ('remote_url', models.URLField(help_text='github 저장소 URL', verbose_name='저장소 URL')),
                ('is_report', models.BooleanField(default=False, verbose_name='파일이나 폴더의 마지막 커밋을 보고')),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='work.issueproject', verbose_name='프로젝트')),
            ],
            options={
                'verbose_name': '16. 저장소',
                'verbose_name_plural': '16. 저장소',
                'ordering': ('id',),
            },
        ),
        migrations.CreateModel(
            name='Commit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('commit_hash', models.CharField(max_length=40, unique=True)),
                ('author', models.CharField(default='Unknown', max_length=100)),
                ('date', models.DateTimeField()),
                ('message', models.TextField(default='')),
                ('branches', models.ManyToManyField(blank=True, related_name='commits', to='work.branch')),
                ('parents', models.ManyToManyField(blank=True, related_name='children', to='work.commit')),
                ('issues', models.ManyToManyField(blank=True, to='work.issue')),
                ('repo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='commits', to='work.repository')),
            ],
            options={
                'verbose_name': '18. 커미트',
                'verbose_name_plural': '18. 커미트',
                'ordering': ('-date',),
            },
        ),
        migrations.AddField(
            model_name='branch',
            name='repo',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='branches', to='work.repository'),
        ),
        migrations.CreateModel(
            name='Role',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=20, verbose_name='이름')),
                ('assignable', models.BooleanField(default=True, verbose_name='업무 위탁 권한')),
                ('issue_visible', models.CharField(choices=[('ALL', '모든 업무'), ('PUB', '비공개 업무 제외'), ('PRI', '직접 생성 또는 담당한 업무'), ('NOP', '없음')], default='PUB', max_length=3, verbose_name='업무 보기 권한')),
                ('time_entry_visible', models.CharField(choices=[('ALL', '모든 시간기록'), ('PRI', '직접 생성한 시간기록'), ('NOP', '없음')], default='ALL', max_length=3, verbose_name='소요시간 보기 권한')),
                ('user_visible', models.CharField(choices=[('ALL', '모든 활성 사용자'), ('PRJ', '보이는 프로젝트 사용자'), ('NOP', '없음')], default='ALL', max_length=3, verbose_name='사용자 보기 권한')),
                ('order', models.PositiveSmallIntegerField(default=1, verbose_name='정렬')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='수정일')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('default_time_activity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.codeactivity', verbose_name='기본 활동')),
                ('permissions', models.ManyToManyField(related_name='roles', to='work.permission')),
            ],
            options={
                'verbose_name': '02. 역할',
                'verbose_name_plural': '02. 역할',
                'ordering': ('order', 'id'),
            },
        ),
        migrations.CreateModel(
            name='Member',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='members', to='work.issueproject', verbose_name='프로젝트')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='구성원')),
                ('roles', models.ManyToManyField(to='work.role', verbose_name='역할')),
            ],
            options={
                'verbose_name': '04. 구성원',
                'verbose_name_plural': '04. 구성원',
            },
        ),
        migrations.AddField(
            model_name='issueproject',
            name='allowed_roles',
            field=models.ManyToManyField(blank=True, related_name='projects', to='work.role', verbose_name='허용 역할'),
        ),
        migrations.CreateModel(
            name='Search',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('offset', models.BigIntegerField(default=False, verbose_name='오프셋')),
                ('limit', models.PositiveIntegerField(blank=True, null=True, verbose_name='응답결과 수')),
                ('q', models.CharField(blank=True, default='', help_text='공백으로 구분된 여러 값을 지정할 수 있습니다.', max_length=255, verbose_name='검색어')),
                ('scope', models.CharField(choices=[('0', '모두'), ('1', '프로젝트 내'), ('2', '하위 프로젝트 포함')], max_length=1, verbose_name='검색 범위 조건')),
                ('all_words', models.BooleanField(default=False, verbose_name='모든 검색어가 일치하는지 여부')),
                ('title_only', models.BooleanField(default=False, verbose_name='제목 검색')),
                ('issue', models.BooleanField(default=False, verbose_name='업무 포함 여부')),
                ('news', models.BooleanField(default=False, verbose_name='공지 포함 여부')),
                ('document', models.BooleanField(default=False, verbose_name='문서 포함 여부')),
                ('changeset', models.BooleanField(default=False, verbose_name='변경 집합 포함 여부')),
                ('wiki', models.BooleanField(default=False, verbose_name='위키 포함 여부')),
                ('forum', models.BooleanField(default=False, verbose_name='게시판 포함 여부')),
                ('project', models.BooleanField(default=False, verbose_name='프로젝트 포함 여부')),
                ('open_issue', models.BooleanField(default=False, verbose_name='미해결 업무 검색')),
                ('attachment', models.CharField(choices=[('0', '설명 및 첨부파일 검색'), ('1', '설명에서만 검색'), ('2', '첨부파일에서만 검색')], default='0', max_length=1, verbose_name='설명 및 첨부파일 검색')),
                ('member', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='work.member', verbose_name='내 검색어')),
            ],
        ),
        migrations.CreateModel(
            name='TimeEntry',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('spent_on', models.DateField(auto_now_add=True, verbose_name='작업일자')),
                ('hours', models.DecimalField(decimal_places=2, max_digits=5, verbose_name='시간')),
                ('comment', models.CharField(blank=True, default='', max_length=255, verbose_name='설명')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='수정일')),
                ('activity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='work.codeactivity', verbose_name='작업분류(시간추적)')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('issue', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='work.issue', verbose_name='업무')),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='work.issueproject', verbose_name='프로젝트')),
            ],
            options={
                'verbose_name': '07. 소요 시간',
                'verbose_name_plural': '07. 소요 시간',
                'ordering': ('-id',),
            },
        ),
        migrations.CreateModel(
            name='ActivityLogEntry',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('sort', models.CharField(choices=[('1', '업무'), ('2', '댓글'), ('3', '변경묶음'), ('4', '공지'), ('5', '문서'), ('6', '파일'), ('7', '위키편집'), ('8', '글'), ('9', '작업시간')], default='1', max_length=1, verbose_name='구분')),
                ('status_log', models.CharField(blank=True, default='', max_length=30, verbose_name='상태 기록')),
                ('act_date', models.DateField(auto_now_add=True, verbose_name='로그 일자')),
                ('timestamp', models.DateTimeField(auto_now_add=True, verbose_name='로그 시간')),
                ('creator', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('issue', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.issue', verbose_name='업무')),
                ('comment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.issuecomment', verbose_name='댓글')),
                ('project', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.issueproject', verbose_name='프로젝트')),
                ('news', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.news', verbose_name='공지')),
                ('spent_time', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.timeentry', verbose_name='소요시간')),
            ],
            options={
                'verbose_name': '19. 작업 내역',
                'verbose_name_plural': '19. 작업 내역',
                'ordering': ('-id',),
            },
        ),
        migrations.CreateModel(
            name='Tracker',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=100, verbose_name='이름')),
                ('description', models.CharField(blank=True, default='', max_length=255, verbose_name='설명')),
                ('is_in_roadmap', models.BooleanField(default=True, verbose_name='로드맵에 표시')),
                ('order', models.PositiveSmallIntegerField(default=1, verbose_name='정렬')),
                ('created', models.DateTimeField(auto_now_add=True, verbose_name='등록일')),
                ('updated', models.DateTimeField(auto_now=True, verbose_name='수정일')),
                ('creator', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='작성자')),
                ('default_status', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='work.issuestatus', verbose_name='초기 상태')),
            ],
            options={
                'verbose_name': '08. 업무 유형',
                'verbose_name_plural': '08. 업무 유형',
                'ordering': ('order', 'id'),
            },
        ),
        migrations.AddField(
            model_name='issueproject',
            name='trackers',
            field=models.ManyToManyField(blank=True, related_name='projects', to='work.tracker', verbose_name='허용유형'),
        ),
        migrations.AddField(
            model_name='issue',
            name='tracker',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='work.tracker', verbose_name='유형'),
        ),
        migrations.CreateModel(
            name='Version',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(db_index=True, max_length=20, verbose_name='이름')),
                ('status', models.CharField(choices=[('1', '진행'), ('2', '잠김'), ('3', '닫힘')], default='1', max_length=1, verbose_name='상태')),
                ('sharing', models.CharField(choices=[('0', '공유 없음'), ('1', '하위 프로젝트'), ('2', '상위 및 하위 프로젝트'), ('3', '최상위 및 모든 하위 프로젝트'), ('4', '모든 프로젝트')], default='1', max_length=1, verbose_name='공유')),
                ('effective_date', models.DateField(blank=True, null=True, verbose_name='버전 출시 기한')),
                ('description', models.CharField(blank=True, default='', max_length=255, verbose_name='설명')),
                ('wiki_page_title', models.CharField(blank=True, default='', max_length=200, verbose_name='위키 페이지')),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('updated', models.DateTimeField(auto_now=True)),
                ('project', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='versions', to='work.issueproject', verbose_name='프로젝트')),
            ],
            options={
                'verbose_name': '05. 버전',
                'verbose_name_plural': '05. 버전',
                'ordering': ('project', 'id'),
            },
        ),
        migrations.AddField(
            model_name='issueproject',
            name='default_version',
            field=models.ForeignKey(blank=True, help_text='기존 공유 버전에서만 작동합니다.', null=True, on_delete=django.db.models.deletion.SET_NULL, to='work.version', verbose_name='기본 버전'),
        ),
        migrations.AddField(
            model_name='issue',
            name='fixed_version',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='issues', to='work.version', verbose_name='목표 버전'),
        ),
        migrations.CreateModel(
            name='Workflow',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('new_statuses', models.ManyToManyField(blank=True, to='work.issuestatus', verbose_name='허용 업무 상태')),
                ('old_status', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='each_status', to='work.issuestatus', verbose_name='업무 상태')),
                ('role', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='work.role', verbose_name='역할')),
                ('tracker', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='work.tracker', verbose_name='업무 유형')),
            ],
            options={
                'verbose_name': '11. 업무 흐름',
                'verbose_name_plural': '11. 업무 흐름',
            },
        ),
        migrations.AddIndex(
            model_name='repository',
            index=models.Index(fields=['project'], name='work_reposi_project_f79a21_idx'),
        ),
        migrations.AddIndex(
            model_name='repository',
            index=models.Index(fields=['slug'], name='work_reposi_slug_f121df_idx'),
        ),
        migrations.AddIndex(
            model_name='commit',
            index=models.Index(fields=['repo', 'date'], name='work_commit_repo_id_28832f_idx'),
        ),
        migrations.AddIndex(
            model_name='commit',
            index=models.Index(fields=['repo', 'id'], name='work_commit_repo_id_5fbe04_idx'),
        ),
        migrations.AddIndex(
            model_name='commit',
            index=models.Index(fields=['repo', 'author'], name='work_commit_repo_id_1926c5_idx'),
        ),
        migrations.AddConstraint(
            model_name='commit',
            constraint=models.UniqueConstraint(fields=('repo', 'commit_hash'), name='unique_repo_commit_hash'),
        ),
        migrations.AddIndex(
            model_name='branch',
            index=models.Index(fields=['name'], name='work_branch_name_2386fb_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='branch',
            unique_together={('repo', 'name')},
        ),
        migrations.AlterUniqueTogether(
            name='member',
            unique_together={('user', 'project')},
        ),
        migrations.AddIndex(
            model_name='activitylogentry',
            index=models.Index(fields=['timestamp', 'project'], name='work_activi_timesta_35b78c_idx'),
        ),
    ]
